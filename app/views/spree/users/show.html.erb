<div class="container-fluid">
  <h3>View your Capitol Drugs acount details</h3>
  <h1><%= user_email_or_name(@user) %>'s Account Dashboard</h1>
  
  <h2>Account Information</h2>
  
  <div class="row">
    <div class="col-md-6">
      <h2>Contact Information <span><%= link_to Spree.t(:edit), spree.edit_account_path %></span></h2>
      <div data-hook="account_summary" class="account-summary">
        <ul id="user-info" class="list-unstyled">
          <% if @user.firstname? %>
          <li><%= @user.firstname + ' ' + @user.lastname %></li>
          <% end %>
          <li><%= @user.email %></li>
          <li><%= link_to Spree.t(:change_password), spree.edit_account_path %></li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="row">
  <% ['billing', 'shipping'].map do |type| %>
    <div class="col-md-6">
      <h2><%= type.capitalize %> Address <span><%= link_to Spree.t(:edit), spree.edit_account_path %></span></h2>
      <div data-hook="<%= type %>_address" class="<%= type %>-address">
      <% if @user.send("#{type}_address") %>
        <ul class="list-unstyled">
          <li>
            <%= @user.send("#{type}_address").firstname %>
            <%= @user.send("#{type}_address").lastname %>
          </li>
          <li>
            <%= @user.send("#{type}_address").address1 %>
            <%= @user.send("#{type}_address").address2 %>
          </li>
          <li>
            <%= @user.send("#{type}_address").city %>
            <%= @user.send("#{type}_address").state.abbr %>
            <%= @user.send("#{type}_address").zipcode %>
          </li>
        </ul>
      <% else %>
        <p>
          <%= link_to Spree.t(:add_information), spree.edit_account_path %>
        </p>
      <% end %>
      </div>
    </div>
  <% end %>
  </div>
  
  
  <div data-hook="account_my_orders" class="account-my-orders">
    <h3><%= Spree.t(:my_orders) %></h3>
    <% if @orders.present? %>
      <table class="table table-striped order-summary">
        <thead class="active">
        <tr>
          <th class="order-number"><%= Spree::Order.human_attribute_name(:number) %></th>
          <th class="order-date"><%= Spree.t(:date) %></th>
          <th class="order-status"><%= Spree.t(:status) %></th>
          <th class="order-payment-state"><%= Spree.t(:payment_state) %></th>
          <th class="order-shipment-state"><%= Spree.t(:shipment_state) %></th>
          <th class="order-total"><%= Spree.t(:total) %></th>
        </tr>
        </thead>
        <tbody>
        <% @orders.each do |order| %>
          <tr>
            <td class="order-number"><%= link_to order.number, order_url(order) %></td>
            <td class="order-date"><%= order.completed_at.to_date %></td>
            <td class="order-status"><%= Spree.t("order_state.#{order.state}").titleize %></td>
            <td class="order-payment-state"><%= Spree.t("payment_states.#{order.payment_state}").titleize if order.payment_state %></td>
            <td class="order-shipment-state"><%= Spree.t("shipment_states.#{order.shipment_state}").titleize if order.shipment_state %></td>
            <td class="lead text-primary order-total"><%= order.display_total %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    <% else %>
      <div class="alert alert-info"><%= Spree.t(:you_have_no_orders_yet) %></div>
    <% end %>
    <br />
  </div>
  
  <!-- Two styles of predicates listed below, ternary and if/else... Use what will be easiest for your styling. Remember, we are trying to be DRY. -->
  
  <% if @user.bill_address %>
    <%= @user.bill_address.firstname? ? true : false %>
    <%= @user.bill_address.lastname? ? @user.bill_address.lastname : "No data to show" %>
    <%= @user.bill_address.address1 %>
    <%= @user.bill_address.address2 %>
    <%= @user.bill_address.city %>
    <%= @user.bill_address.zipcode %>
    <%= @user.bill_address.phone %>
    <%= @user.bill_address.state_name %>
    <%= @user.bill_address.alternative_phone %>
    <%= @user.bill_address.company %>
    <%= @user.bill_address.lastname %>
  <% end %>
  
  <% if @user.ship_address %>
    <%= @user.ship_address.firstname %>
    <%= @user.ship_address.lastname %>
    <%= @user.ship_address.address1 %>
    <%= @user.ship_address.address2 %>
    <%= @user.ship_address.city %>
    <%= @user.ship_address.zipcode %>
    <%= @user.ship_address.phone %>
    <%= @user.ship_address.state_name %>
    <%= @user.ship_address.alternative_phone %>
    <%= @user.ship_address.company %>
    <%= @user.ship_address.lastname %>
  <% end %>
</div>
